### 122. 买卖股票的最佳时机 II

- ##### 题目描述

  给定一个数组，它的第 **i** 个元素是一支给定股票第 **i** 天的价格。

  设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。

  注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。


- ##### 示例

  ```
  输入: [7,1,5,3,6,4]
  输出: 7
  解释: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。
       随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 
  ```

- ##### 题解

  - ###### 解法一： 贪心法

    遍历整个股票交易日价格列表 `prices`，策略是所有上涨交易日都买卖（赚到所有利润），所有下降交易日都不买卖（永不亏钱）。     

    ```python
    class Solution:
        def maxProfit(self, prices: List[int]) -> int:
            income = 0
            i = 0
            for i in range(len(prices) - 1):
                if prices[i] < prices[i + 1]:
                    income += prices[i + 1] - prices[i]
                
            return income        
    ```

    - **时间复杂度 O(N) **： 只需遍历一次`price`

    - **空间复杂度 O(1)** ：变量使用常数额外空间

      

  - ###### 解法二：动态规划

    - **状态转移方程**：

      **Case 1：**今天我没有股票，有两种可能：

      昨天我手上就没有股票，今天不做任何操作（rest）；

      昨天我手上有一只股票，今天按照时价卖掉了（sell），收获了一笔钱

      **Case 2：**今天持有一只股票，有两种可能：

      昨天我手上就有这只股票，今天不做任何操作（rest）；

      昨天我没有股票，今天按照时价买入一只（sell），花掉了一笔钱

      综上，第 i 天的状态转移方程为：

      ```python
      dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
      dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])
      ```

    - **边界状态**

      观察状态转移方程，第 i 天的状态只由第 i-1 天状态推导而来，因此边界状态只需要定义 i=0（也就是第一天）即可：

      ```python
      dp[0][0] = 0       		# 第一天没有股票，说明没买没卖，获利为 0
      dp[0][1] = - prices[0]   # 第一天持有股票，说明买入了，花掉一笔钱
      ```

      ```python
      class Solution:
          def maxProfit(self, prices: List[int]) -> int:
      		if len(prices) < 2:
                  return 0
              
              dp = [[None, None] for _ in range(len(prices))]
              dp[0][0] = 0
              dp[0][1] = - prices[0]  
              
              for i in range(1, len(prices)):
                  dp[i][0] = max(dp[i-1][0], dp[i-1][1]+prices[i])
                  dp[i][1] = max(dp[i-1][1], dp[i-1][0]-prices[i])
      
              return dp[-1][0]    # 返回最后一天且手上没有股票时的获利情况
      ```

      - **时间复杂度：O(N)**，这里 N 表示股价数组的长度。
      - **空间复杂度：O(N)**，虽然是二维数组，但是第二维是常数，与问题规模无关。